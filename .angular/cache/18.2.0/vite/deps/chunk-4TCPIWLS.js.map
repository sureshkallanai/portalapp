{
  "version": 3,
  "sources": ["../../../../../node_modules/rxjs/dist/esm5/internal/scheduler/dateTimestampProvider.js", "../../../../../node_modules/rxjs/dist/esm5/internal/ReplaySubject.js"],
  "sourcesContent": ["export var dateTimestampProvider = {\n  now: function () {\n    return (dateTimestampProvider.delegate || Date).now();\n  },\n  delegate: undefined\n};\n", "import { __extends } from \"tslib\";\nimport { Subject } from './Subject';\nimport { dateTimestampProvider } from './scheduler/dateTimestampProvider';\nvar ReplaySubject = function (_super) {\n  __extends(ReplaySubject, _super);\n  function ReplaySubject(_bufferSize, _windowTime, _timestampProvider) {\n    if (_bufferSize === void 0) {\n      _bufferSize = Infinity;\n    }\n    if (_windowTime === void 0) {\n      _windowTime = Infinity;\n    }\n    if (_timestampProvider === void 0) {\n      _timestampProvider = dateTimestampProvider;\n    }\n    var _this = _super.call(this) || this;\n    _this._bufferSize = _bufferSize;\n    _this._windowTime = _windowTime;\n    _this._timestampProvider = _timestampProvider;\n    _this._buffer = [];\n    _this._infiniteTimeWindow = true;\n    _this._infiniteTimeWindow = _windowTime === Infinity;\n    _this._bufferSize = Math.max(1, _bufferSize);\n    _this._windowTime = Math.max(1, _windowTime);\n    return _this;\n  }\n  ReplaySubject.prototype.next = function (value) {\n    var _a = this,\n      isStopped = _a.isStopped,\n      _buffer = _a._buffer,\n      _infiniteTimeWindow = _a._infiniteTimeWindow,\n      _timestampProvider = _a._timestampProvider,\n      _windowTime = _a._windowTime;\n    if (!isStopped) {\n      _buffer.push(value);\n      !_infiniteTimeWindow && _buffer.push(_timestampProvider.now() + _windowTime);\n    }\n    this._trimBuffer();\n    _super.prototype.next.call(this, value);\n  };\n  ReplaySubject.prototype._subscribe = function (subscriber) {\n    this._throwIfClosed();\n    this._trimBuffer();\n    var subscription = this._innerSubscribe(subscriber);\n    var _a = this,\n      _infiniteTimeWindow = _a._infiniteTimeWindow,\n      _buffer = _a._buffer;\n    var copy = _buffer.slice();\n    for (var i = 0; i < copy.length && !subscriber.closed; i += _infiniteTimeWindow ? 1 : 2) {\n      subscriber.next(copy[i]);\n    }\n    this._checkFinalizedStatuses(subscriber);\n    return subscription;\n  };\n  ReplaySubject.prototype._trimBuffer = function () {\n    var _a = this,\n      _bufferSize = _a._bufferSize,\n      _timestampProvider = _a._timestampProvider,\n      _buffer = _a._buffer,\n      _infiniteTimeWindow = _a._infiniteTimeWindow;\n    var adjustedBufferSize = (_infiniteTimeWindow ? 1 : 2) * _bufferSize;\n    _bufferSize < Infinity && adjustedBufferSize < _buffer.length && _buffer.splice(0, _buffer.length - adjustedBufferSize);\n    if (!_infiniteTimeWindow) {\n      var now = _timestampProvider.now();\n      var last = 0;\n      for (var i = 1; i < _buffer.length && _buffer[i] <= now; i += 2) {\n        last = i;\n      }\n      last && _buffer.splice(0, last + 1);\n    }\n  };\n  return ReplaySubject;\n}(Subject);\nexport { ReplaySubject };\n"],
  "mappings": ";;;;;;AAAO,IAAI,wBAAwB;AAAA,EACjC,KAAK,WAAY;AACf,YAAQ,sBAAsB,YAAY,MAAM,IAAI;AAAA,EACtD;AAAA,EACA,UAAU;AACZ;;;ACFA,IAAI,gBAAgB,SAAU,QAAQ;AACpC,YAAUA,gBAAe,MAAM;AAC/B,WAASA,eAAc,aAAa,aAAa,oBAAoB;AACnE,QAAI,gBAAgB,QAAQ;AAC1B,oBAAc;AAAA,IAChB;AACA,QAAI,gBAAgB,QAAQ;AAC1B,oBAAc;AAAA,IAChB;AACA,QAAI,uBAAuB,QAAQ;AACjC,2BAAqB;AAAA,IACvB;AACA,QAAI,QAAQ,OAAO,KAAK,IAAI,KAAK;AACjC,UAAM,cAAc;AACpB,UAAM,cAAc;AACpB,UAAM,qBAAqB;AAC3B,UAAM,UAAU,CAAC;AACjB,UAAM,sBAAsB;AAC5B,UAAM,sBAAsB,gBAAgB;AAC5C,UAAM,cAAc,KAAK,IAAI,GAAG,WAAW;AAC3C,UAAM,cAAc,KAAK,IAAI,GAAG,WAAW;AAC3C,WAAO;AAAA,EACT;AACA,EAAAA,eAAc,UAAU,OAAO,SAAU,OAAO;AAC9C,QAAI,KAAK,MACP,YAAY,GAAG,WACf,UAAU,GAAG,SACb,sBAAsB,GAAG,qBACzB,qBAAqB,GAAG,oBACxB,cAAc,GAAG;AACnB,QAAI,CAAC,WAAW;AACd,cAAQ,KAAK,KAAK;AAClB,OAAC,uBAAuB,QAAQ,KAAK,mBAAmB,IAAI,IAAI,WAAW;AAAA,IAC7E;AACA,SAAK,YAAY;AACjB,WAAO,UAAU,KAAK,KAAK,MAAM,KAAK;AAAA,EACxC;AACA,EAAAA,eAAc,UAAU,aAAa,SAAU,YAAY;AACzD,SAAK,eAAe;AACpB,SAAK,YAAY;AACjB,QAAI,eAAe,KAAK,gBAAgB,UAAU;AAClD,QAAI,KAAK,MACP,sBAAsB,GAAG,qBACzB,UAAU,GAAG;AACf,QAAI,OAAO,QAAQ,MAAM;AACzB,aAAS,IAAI,GAAG,IAAI,KAAK,UAAU,CAAC,WAAW,QAAQ,KAAK,sBAAsB,IAAI,GAAG;AACvF,iBAAW,KAAK,KAAK,CAAC,CAAC;AAAA,IACzB;AACA,SAAK,wBAAwB,UAAU;AACvC,WAAO;AAAA,EACT;AACA,EAAAA,eAAc,UAAU,cAAc,WAAY;AAChD,QAAI,KAAK,MACP,cAAc,GAAG,aACjB,qBAAqB,GAAG,oBACxB,UAAU,GAAG,SACb,sBAAsB,GAAG;AAC3B,QAAI,sBAAsB,sBAAsB,IAAI,KAAK;AACzD,kBAAc,YAAY,qBAAqB,QAAQ,UAAU,QAAQ,OAAO,GAAG,QAAQ,SAAS,kBAAkB;AACtH,QAAI,CAAC,qBAAqB;AACxB,UAAI,MAAM,mBAAmB,IAAI;AACjC,UAAI,OAAO;AACX,eAAS,IAAI,GAAG,IAAI,QAAQ,UAAU,QAAQ,CAAC,KAAK,KAAK,KAAK,GAAG;AAC/D,eAAO;AAAA,MACT;AACA,cAAQ,QAAQ,OAAO,GAAG,OAAO,CAAC;AAAA,IACpC;AAAA,EACF;AACA,SAAOA;AACT,EAAE,OAAO;",
  "names": ["ReplaySubject"]
}
